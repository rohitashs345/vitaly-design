{% if template contains 'index' or template contains 'collection' or template contains 'product' %}
    
{% else %}
    <style>.card-colored.color-background-1,.card.card--soft{background-color:rgba(var(--color-foreground),.04)}.card--product,.card-wrapper{position:relative}.card,.card--media,.card-wrapper,.card-wrapper-link{text-decoration:none}.card{display:block;overflow:hidden}.card-information+.card{margin-bottom:1.3rem}.price-color-swatch-wrapper{display:flex;justify-content:space-between;align-items:flex-end;flex-direction:column}.card.card--soft{color:rgb(var(--color-foreground))}.card .icon-wrap{margin-left:.8rem;white-space:nowrap;transition:transform var(--duration-short) ease;overflow:hidden}.card--media{display:block}.card--text-only{display:flex;justify-content:center}.card--text-only.card--product{position:static}.card--text-only:before{content:"";display:block;padding-bottom:100%}.card--stretch{height:100%}.card--light-border{border:.1rem solid rgba(var(--color-foreground),.04)}.card--light-border:hover{border:.1rem solid rgba(var(--color-foreground),.3);box-shadow:none}.card__text-spacing{padding:3rem}.card--media .card__text-spacing,.card__media-full-spacer{padding:2rem}@media screen and (min-width:750px){.card-information+.card{margin-bottom:10px}.card--media .card__text-spacing{padding-left:3rem;padding-right:3rem;display:none}}.card-information>*+*{margin-top:.5rem}.card--text-only .card__inner{display:grid;grid-template-rows:1fr auto 1fr;width:100%}.card__content{margin-left:2.5rem;margin-right:2.5rem}.card__content>*,.card__text-spacing>*{margin:0}.card--text-only .card__content{grid-row:2;justify-self:flex-start;margin-bottom:6rem;margin-top:5rem}.card--text-only .card__badge{align-self:flex-end;grid-row:3}.card--search .card__badge>*,.card--text-only .card__badge>*{margin:0 1.2rem 1.2rem}.card--search .card__badge,.card--text-only .card__badge{position:initial}.card--text-only .card__content+.card__badge{margin-top:-5rem}.media+.card__content{margin-top:2rem;margin-bottom:1.5rem}.card__text-spacing>:not(.overlay-card)+*{margin-top:1.5rem}.card__text{margin:0;word-break:break-word}.card-information__text{display:block;font-size:1.6rem;font-weight:700;line-height:1;margin:12px 0 10px}.price,.price--large{line-height:calc(1 + .5 / var(--font-body-scale))}.card-information__wrapper.card-information__wrapper--grid .card-information__text{grid-area:title;margin:0}.card-information__wrapper.card-information__wrapper--grid>*{line-height:calc(1 + .4 / var(--font-body-scale));color:rgb(var(--color-foreground))}.card-information__wrapper .price{font-size:1.3rem}.fa-star-half-o:before,.fa-star-o:before,.fa-star:before,.stamped-badge:before,.stamped-fa-star-half-o:before,.stamped-fa-star-o:before,.stamped-fa-star:before{font-size:13px!important}.card-information__wrapper.card-information__wrapper--grid .price{color:rgb(var(--color-foreground));grid-area:price;margin:0}.card-information__wrapper.card-information__wrapper--grid .stamped-product-reviews-badge{grid-area:reviews}.card-information__wrapper.card-information__wrapper--grid{grid-area:swatches;justify-content:end;width:100%;display:grid;grid-template-areas:"title title" "reviews reviews" "price swatches"}.card-information__wrapper.card-information__wrapper--grid>.rating{margin-top:.4rem}.card-wrapper{color:inherit;display:flex;flex-direction:column;justify-content:space-between;background-color:rgba(var(--color-base-background-2));border:1px solid rgba(var(--color-base-accent-1));height:100%;box-sizing:border-box}.card-wrapper .card-information{order:1;padding:10px}.card-wrapper.card-wrapper--grid .card-information{padding:0 5px 5px}.card-wrapper .full-unstyled-link:after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;width:100%;height:100%;z-index:1}.card-wrapper .full-unstyled-link:focus-visible{outline:0;box-shadow:none}.card-wrapper .full-unstyled-link:focus-visible:after{outline:.2rem solid rgba(var(--color-foreground),.5);outline-offset:.3rem;box-shadow:0 0 0 .3rem rgb(var(--color-background)),0 0 .5rem .4rem rgba(var(--color-foreground),.3)}.card-wrapper:focus-within .card{box-shadow:none}.card__media-spacer{padding:2rem 2rem 0}@media screen and (min-width:750px){.card--text-only .card__content{margin-top:7rem;margin-bottom:7rem}.card--text-only .card__content+.card__badge{margin-top:-7rem}.card-information__wrapper.card-information__wrapper--grid{grid-template-areas:"title price" "reviews swatches"}.card-information__wrapper.card-information__wrapper--grid .price{justify-content:end}.card__media-spacer{padding:3rem 3rem 0}.price{margin-bottom:0}}.card-article-info{margin-top:1rem;display:flex;flex-wrap:wrap}.card__badge{display:flex;flex-wrap:wrap;position:absolute;top:10px;left:10px}.card__badge .on-sale-badge{border:none;background-color:red;border-radius:0}.card__badge .sold-out-badge{border:none;background-color:rgba(var(--color-base-accent-1));border-radius:0;text-transform:capitalize}.overlay-card{position:absolute;top:0;bottom:0;left:0;right:0;display:flex;background:0 0;transition:background-color var(--duration-long) ease}.card:hover .card-colored .overlay-card{background-color:rgba(var(--color-card-hover),.06)}.card-information__wrapper.card-information__wrapper--grid .ProductCard-ColorSwatches{display:flex;align-items:flex-end;margin:0}.ProductCard-ColorSwatches .options-values-wrapper{display:flex;flex-wrap:wrap;gap:5px;padding-bottom:2.5px}.card-information__wrapper.card-information__wrapper--grid .ProductCard-ColorSwatches .options-values-wrapper{gap:0;padding-bottom:2.5px}@media screen and (min-width:500px){.ProductCard-ColorSwatches .options-values-wrapper{padding-bottom:1.5px}}.ProductCard-ColorSwatches{margin-top:12px}.ProductCard-ColorSwatches input[type=radio]{clip:rect(0,0,0,0);overflow:hidden;position:absolute;height:1px;width:1px}.ProductCard-ColorSwatches input[type=radio]+label{--color-swatch-size:22px;border:1px solid rgba(var(--color-base-accent-2));display:inline-block;font-size:1.4rem;letter-spacing:.1rem;line-height:1;text-align:center;transition:border var(--duration-short) ease;cursor:pointer;display:flex;justify-content:center;align-items:center;min-width:auto;height:var(--color-swatch-size);width:var(--color-swatch-size);padding:0;background-size:cover}.card-information__wrapper.card-information__wrapper--grid .ProductCard-ColorSwatches input[type=radio]+label{--color-swatch-size:13px;margin:0 0 0 8px}.ProductCard-ColorSwatches input[type=radio]+label:hover,.ProductCard-ColorSwatches input[type=radio]:checked+label{border:.1rem solid rgb(var(--color-foreground))}.stamped-badge:before{content:"("attr(data-rating) ") "!important}span.stamped-badge-caption{display:none}.stamped-badge[data-rating="0.0"]{display:none!important}.price{align-items:center;display:flex;flex-direction:row;flex-wrap:wrap;font-size:12px;color:rgb(var(--color-foreground))}.price.price--unavailable{visibility:hidden}.price--end{justify-content:flex-end}.price:not(.price--show-badge) .price-item--last:last-of-type{margin-left:5px}.price--large{font-size:1.6rem;letter-spacing:.13rem}.price--sold-out .price__availability,.price__regular,.product-recommendations{display:block}.grid__item-brand-callout-desktop,.price .price__badge-bestseller,.price .price__badge-collaboration,.price .price__badge-final-sale,.price .price__badge-low-stock,.price .price__badge-new,.price .price__badge-sale,.price .price__badge-sold-out,.price--on-sale .price__availability,.price--on-sale .price__regular,.price__availability,.price__sale{display:none}.price--is-bestseller .price__badge-bestseller,.price--is-collaboration .price__badge-collaboration,.price--is-new .price__badge-new,.price--low-stock .price__badge-low-stock,.price--on-final-sale .price__badge-final-sale,.price--on-sale .price__badge-sale,.price--sold-out .price__badge-sold-out{display:inline-flex}.price--on-sale .price__sale{display:flex;flex-direction:row;flex-wrap:wrap;align-items:center}.price--center{display:flex;justify-content:center}.price--on-sale .price-item--regular{text-decoration:line-through;color:rgba(var(--color-foreground),.5)}.price-item--sale{color:var(--color-sale-price);font-weight:700}.unit-price{display:block;font-size:1.1rem;letter-spacing:.04rem;line-height:calc(1 + .2 / var(--font-body-scale));margin-top:.2rem;text-transform:uppercase;color:rgba(var(--color-foreground),.7)}.product-grid{--grid-desktop-horizontal-spacing:10px;gap:var(--grid-desktop-horizontal-spacing);margin-left:0;margin-top:10px}.product-grid .grid__item{padding:0}.grid__item-placeholder{width:0!important;height:0;padding:0!important}.grid__item-brand-callout{width:100%!important;max-width:100%!important;padding-right:0!important}.brand-callout-card{border:1px solid rgba(var(--color-base-accent-1));padding:0 20px 25px!important;background-color:rgba(var(--color-base-accent-1));color:rgba(var(--color-base-background-1))}.grid__item-brand-callout h2{color:rgba(var(--color-base-background-1));font-size:30px}.grid__item-brand-callout p{font-size:16px}@media screen and (min-width:990px){.card .media.media--hover-effect>img:only-child,.card--search img,.card-wrapper .media.media--hover-effect>img:only-child{transition:transform var(--duration-long) ease}.card__inner:hover .media.media--hover-effect>img:first-child:not(:only-child){opacity:0}.card__inner:hover .media.media--hover-effect>img+img{opacity:1}.card__inner:hover .card-information__text,.card__inner:hover .card__text{text-decoration:underline;text-underline-offset:.3rem}.card__inner:hover .card--soft{background-color:rgba(var(--color-card-hover),.06);transition:background-color var(--duration-long) ease}.product-type-menu-wrapper #main-collection-filters{position:absolute;width:auto;height:auto}.grid__item-placeholder{display:none}.grid__item-brand-callout{width:calc(25% - .75rem)!important}.brand-callout-card{display:flex;flex-direction:column;justify-content:space-between;height:100%}.grid__item-brand-callout h2{font-size:20px}.grid__item-brand-callout p{font-size:14px}.grid__item-brand-callout-mobile{display:none}.grid__item-brand-callout-desktop{display:block}}@media screen and (min-width:1260px){.grid__item-brand-callout h2{font-size:30px}}@media screen and (min-width:750px) and (max-width:989px){#product-grid.grid--1-col-tablet.grid--peek .grid__item{width:calc(100% - var(--grid-desktop-horizontal-spacing) - 3rem)}#product-grid.grid--2-col-tablet .grid__item{width:calc(50% - var(--grid-desktop-horizontal-spacing)/ 2);max-width:calc(50% - var(--grid-desktop-horizontal-spacing)/ 2)}#product-grid.grid--3-col-tablet .grid__item{width:calc(33.33% - var(--grid-desktop-horizontal-spacing) * 2 / 3);max-width:calc(33.33% - var(--grid-desktop-horizontal-spacing) * 2 / 3)}}@media screen and (min-width:990px){#product-grid.grid--6-col-desktop .grid__item{width:calc(16.66% - var(--grid-desktop-horizontal-spacing) * 5 / 6);max-width:calc(16.66% - var(--grid-desktop-horizontal-spacing) * 5 / 6)}#product-grid.grid--5-col-desktop .grid__item{width:calc(20% - var(--grid-desktop-horizontal-spacing) * 4 / 5);max-width:calc(20% - var(--grid-desktop-horizontal-spacing) * 4 / 5)}#product-grid.grid--4-col-desktop .grid__item{width:calc(25% - var(--grid-desktop-horizontal-spacing) * 3 / 4);max-width:calc(25% - var(--grid-desktop-horizontal-spacing) * 3 / 4)}#product-grid.grid--3-col-desktop .grid__item{width:calc(33.33% - var(--grid-desktop-horizontal-spacing) * 2 / 3);max-width:calc(33.33% - var(--grid-desktop-horizontal-spacing) * 2 / 3)}#product-grid.grid--2-col-desktop .grid__item{width:calc(50% - var(--grid-desktop-horizontal-spacing)/ 2);max-width:calc(50% - var(--grid-desktop-horizontal-spacing)/ 2)}#product-grid.grid--1-col-desktop{flex:0 0 100%;max-width:100%}#product-grid.grid--1-col-desktop .grid__item{width:100%;max-width:100%}}.product-recommendations__heading{margin:10px 0}@media screen and (min-width:750px){.price--large{font-size:1.8rem}.grid__item-brand-callout-mobile{display:none}.product-recommendations .product-grid .grid__item{padding-bottom:10px!important}}</style>
{% endif %}
<link rel="stylesheet" data-href="{{ 'component-card.css' | asset_url }}">
<link rel="stylesheet" data-href="{{ 'component-price.css' | asset_url }}">
<link rel="stylesheet" data-href="{{ 'component-product-grid.css' | asset_url }}">
<link rel="stylesheet" data-href="{{ 'section-product-recommendations.css' | asset_url }}">
  

<noscript>{{ 'component-card.css' | asset_url | stylesheet_tag }}</noscript>
<noscript>{{ 'component-price.css' | asset_url | stylesheet_tag }}</noscript>
<noscript>{{ 'component-product-grid.css' | asset_url | stylesheet_tag }}</noscript>
<noscript>{{ 'section-product-recommendations.css' | asset_url | stylesheet_tag }}</noscript>

<style>
  .product-recommendations-slider-width {
    max-width: var(--page-width);
    margin: 0 auto;
  }

  .product-recommendations__heading {
    padding: 0 10px;
  }
  /* .large-screen-slider-override {
    display: none;
  } */

  /* .featured-collection-slider .slider__slide {
    max-width: 22%!important;
  } */

  /* .featured-collection-slider li:first-of-type {
    margin-left: 10px;
  } */

  {% comment %} .featured-collection-slider .slider__slide:first-of-type {
    padding-left: 10px;
  } {% endcomment %}

  .featured-collection-slider .slider__slide:last-of-type {
    padding-right: 10px;
  }

  @media screen and (min-width: 2600px) {
    .large-screen-slider-override {
      display: flex;
      margin-top: 0;
    }

    {% comment %} .featured-collection-slider .slider__slide:first-of-type {
      padding-left: 0;
    } {% endcomment %}

    .featured-collection-slider .slider__slide:last-of-type {
      padding-right: 0;
    }

    product-recommendations .featured-collection-slider .slider__slide {
      max-width: 25% !important;
    }

    product-recommendations .featured-collection-slider ul {
      padding: 0 10px;
      flex-wrap: wrap !important;
    }
    .product-recommendations-slider-width {
      max-width: 2600px;
      margin: 0 auto;
      padding: 0;
    }
  }
</style>

<product-recommendations
  class="product-recommendations product-recommendations-slider-width"
  data-url="{{ routes.product_recommendations_url }}?section_id={{ section.id }}&product_id={{ product.id }}&limit=8"
>
  {% if recommendations.performed and recommendations.products_count > 0 %}
    <h2 class="product-recommendations__heading">{{ section.settings.heading | escape }}</h2>

    <slider-component class="slider-mobile-gutter featured-collection-slider">
      <ul
        id="Slider-{{ section.id }}"
        class="grid grid--2-col product-grid slider--tablet grid--peek{% if recommendations.products_count > 3 %} grid--4-col-desktop grid--quarter-max{% else %} grid--{{ recommendations.products_count }}-col-tablet{% endif %}"
        role="list"
      >
        {% for recommendation in recommendations.products %}
          <li id="Slide-{{ section.id }}-{{ forloop.index }}" class="grid__item slider__slide">
            {% render 'product-card',
              product_card_product: recommendation,
              media_size: section.settings.image_ratio,
              show_secondary_image: section.settings.show_secondary_image,
              add_image_padding: section.settings.add_image_padding,
              show_vendor: section.settings.show_vendor,
              show_image_outline: section.settings.show_image_outline,
              show_rating: section.settings.show_rating
            %}
          </li>
        {%- endfor -%}
      </ul>
    </slider-component>
  {% endif %}
</product-recommendations>

<script type="lazyload_int">
  class ProductRecommendations extends HTMLElement {
    constructor() {
      super();

      const handleIntersection = (entries, observer) => {
        if (!entries[0].isIntersecting) return;
        observer.unobserve(this);

        fetch(this.dataset.url)
          .then((response) => response.text())
          .then((text) => {
            const html = document.createElement('div');
            html.innerHTML = text;
            const recommendations = html.querySelector('product-recommendations');
            if (recommendations && recommendations.innerHTML.trim().length) {
              this.innerHTML = recommendations.innerHTML;
            }
          })
          .catch((e) => {
            console.error(e);
          });
      };

      new IntersectionObserver(handleIntersection.bind(this), { rootMargin: '0px 0px 200px 0px' }).observe(this);
    }
  }

  customElements.define('product-recommendations', ProductRecommendations);
</script>

{% schema %}
{
  "name": "t:sections.product-recommendations.name",
  "tag": "section",
  "class": "spaced-section id-product-recos",
  "settings": [
    {
      "type": "paragraph",
      "content": "t:sections.product-recommendations.settings.paragraph__1.content"
    },
    {
      "type": "text",
      "id": "heading",
      "default": "You may also like",
      "label": "t:sections.product-recommendations.settings.heading.label"
    },
    {
      "type": "header",
      "content": "t:sections.product-recommendations.settings.header__2.content"
    },
    {
      "type": "select",
      "id": "image_ratio",
      "options": [
        {
          "value": "adapt",
          "label": "t:sections.product-recommendations.settings.image_ratio.options__1.label"
        },
        {
          "value": "portrait",
          "label": "t:sections.product-recommendations.settings.image_ratio.options__2.label"
        },
        {
          "value": "square",
          "label": "t:sections.product-recommendations.settings.image_ratio.options__3.label"
        }
      ],
      "default": "adapt",
      "label": "t:sections.product-recommendations.settings.image_ratio.label"
    },
    {
      "type": "checkbox",
      "id": "show_secondary_image",
      "default": false,
      "label": "t:sections.product-recommendations.settings.show_secondary_image.label"
    },
    {
      "type": "checkbox",
      "id": "add_image_padding",
      "default": false,
      "label": "t:sections.product-recommendations.settings.add_image_padding.label"
    },
    {
      "type": "checkbox",
      "id": "show_image_outline",
      "default": true,
      "label": "t:sections.product-recommendations.settings.show_image_outline.label"
    },
    {
      "type": "checkbox",
      "id": "show_vendor",
      "default": false,
      "label": "t:sections.product-recommendations.settings.show_vendor.label"
    },
    {
      "type": "checkbox",
      "id": "show_rating",
      "default": false,
      "label": "t:sections.product-recommendations.settings.show_rating.label",
      "info": "t:sections.product-recommendations.settings.show_rating.info"
    }
  ]
}
{% endschema %}
